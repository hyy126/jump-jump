{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?5b85","webpack:///./src/App.vue?4a93","webpack:///./src/three/utils/index.js","webpack:///./src/three/config/bottle-conf.js","webpack:///./src/three/config/block-conf.js","webpack:///./src/three/config/sceneConfig.js","webpack:///./src/three/utils/animation.js","webpack:///./src/three/scene/Camera.js","webpack:///./src/three/block/base.js","webpack:///./src/three/block/Cylinder.js","webpack:///./src/three/block/Cuboid.js","webpack:///./src/three/scene/Light.js","webpack:///./src/three/objects/ground.js","webpack:///./src/three/objects/background.js","webpack:///./src/three/config/audio-conf.js","webpack:///./src/three/modules/audioManage.js","webpack:///./src/three/objects/bottle.js","webpack:///./src/three/utils/event.js","webpack:///src/App.vue","webpack:///./src/three/objects/tail.js","webpack:///./src/three/scene/Scene.js","webpack:///./src/App.vue?a7d1","webpack:///./src/App.vue","webpack:///./src/main.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","score","ref","attrs","staticRenderFns","pointInPolygon","point","vs","x","y","inside","xi","yi","xj","yj","intersect","mapUv","textureWidth","textureHeight","geometry","faceIdx","x1","y1","x2","y2","flag","tileUvW","tileUvH","faces","THREE","Face3","UVs","faceVertexUvs","getRandomHslColor","Math","round","random","headRadius","initPosition","z","bodyWidth","jumpResult","HIT_NEXT_BLOCK_CENTER","HIT_CURRENT_BLOCK","GAME_OVER_NEXT_BLOCK_BACK","GAME_OVER_CURRENT_BLOCK_BACK","GAME_OVER_NEXT_BLOCK_FRONT","GAME_OVER_BOTH","HIT_NEXT_BLOCK_NORMAL","blockHeight","gravity","colors","aspect","innerHeight","innerWidth","frustsize","frustheight","bacgroundColor","customAnimation","duration","oldObj","newObj","easing","delay","tween","TWEEN","Tween","to","Easing","Linear","None","onUpdate","obj","prop","setTimeout","start","config","Camera","instance","init","OrthographicCamera","position","set","target","Vector3","lookAt","newTargetPosition","blockConf","blockWidth","BaseBlock","type","height","width","status","scale","seed","floor","color","_shrink","DELTA_SCALE","MIN_SCALE","max","deltaY","Elastic","Out","vertices","centerPosition","Cylinder","size","cb","innerMaterial","MeshLambertMaterial","outerMaterial","outerHeight","outerGeometry","CylinderGeometry","innerGeometry","totalMesh","Object3D","topMesh","Mesh","receiveShadow","castShadow","middleMesh","bottomMesh","add","option","loader","TextureLoader","Cuboid","BoxGeometry","utils","load","texture","material","map","Light","instances","ambientLight","AmbientLight","shadowLight","DirectionalLight","basicMaterial","MeshBasicMaterial","shadowTarget","PlaneGeometry","visible","shadow","camera","near","far","left","right","bottom","top","mapSize","targetPosition","Ground","groundGeometry","ShadowMaterial","opacity","rotation","PI","Background","audioSources","shrink","shrink_end","fall","fall_from_block","combo1","combo2","combo3","combo4","combo5","combo6","combo7","combo8","success","canplay","audioManage","audioSource","src","audio","Audio","onended","play","loop","action","bottleConf","Bottle","axis","hit","scaleY","direction","flyingTime","velocity","vx","vy","isGatherParticle","bottle","human","body","loadTexture","initHead","initBottom","initMiddle","initBodyHeader","head","initParticle","cachePoint","forEach","randomPoint","initRandomPoint","that","timer","setInterval","clearInterval","resetParticle","cache","minDistance","maxDistance","whitegeometry","Geometry","greengeometry","PointsMaterial","greenmaterial","whitegeometrypoints","Points","greengeometrypoints","OctahedronGeometry","bottomMaterial","middle","middleMaterial","topGeometry","SphereGeometry","specularMaterial","specularTexture","bottomTexture","middleTexture","gatherParticle","translateH","translateY","HORIZON_DELTA_SCALE","HEAD_DELTA","bottleDeltaY","tickTime","translateOnAxis","Date","now","lastFrameTime","_jump","stop","Bounce","undefined","min","Public","handlers","on","eventType","handler","self","emit","handlerArgs","Array","arguments","off","currentEvent","len","TailSystem","cellTailConfig","distance","tailsRemainPool","tailsUsingPool","scene","lastDotPosition","clone","nowPosition","side","DoubleSide","transparent","cellTail","CellTail","mesh","updateActiveCell","distanceTo","lastPosition","tickScale","lerp","layEgg","array","deltaScaleY","newScale","resetCeil","reset","_cell","getMesh","rotateY","res","Scene","canvas","currentBlock","targetBlock","checkingHit","combo","renderer","WebGLRenderer","antialias","preserveDrawingBuffer","shadowMap","enabled","PCFShadowMap","setPixelRatio","devicePixelRatio","setSize","offsetWidth","offsetHeight","initLight","addGround","initBacground","initBottle","addInitBlock","tailSystem","render","initDown","ground","background","light","cuboid","cylinder","setDirection","currentPosision","normalize","OrbitControls","domElement","cameraTargetPosition","updateCameraPosition","updatePosition","event","_that","destination","updateScoreEvent","updateNextBlock","tilt","gameover","alert","restart","forerake","hypsokinesis","straight","deleteObjectsfromScene","getObjectByName","remove","dispose","time","update","checkBottleHit","stats","verticesNeedUpdate","requestAnimationFrame","keyTouch","isKeyDown","methods","animate","initstats","Stats","style","document","appendChild","bindTouchEvent","onkeydown","e","keyCode","touchstart","onkeyup","touchend","checkRight","touchStartTime","touchEndTime","toFixed","getHitStatus","rebound","rotate","jump","initY","bottlePosition","translate","nextBlock","nextPolygon","result1","abs","nextDiff","currentPolygon","result2","removeTouchEvent","initScoreEvent","mounted","destroyed","component","Vue","productionTip","h","App","$mount"],"mappings":"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","file":"js/app.7135c668.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"jump-wrapper\"},[_c('section',{staticClass:\"score-wrapper\"},[_vm._v(_vm._s(_vm.score))]),_c('canvas',{ref:\"canvas\",attrs:{\"id\":\"app\"}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default {\r\n  //射线法判断点是否在多边形内\r\n  pointInPolygon(point, vs) {\r\n    // get source code from https://github.com/substack/point-in-polygon\r\n    // ray-casting algorithm based on\r\n    // http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html\r\n\r\n    var x = point[0],\r\n      y = point[1];\r\n\r\n    var inside = false;\r\n    for (var i = 0, j = vs.length - 1; i < vs.length; j = i++) {\r\n      var xi = vs[i][0],\r\n        yi = vs[i][1];\r\n      var xj = vs[j][0],\r\n        yj = vs[j][1];\r\n\r\n      var intersect =\r\n        yi > y != yj > y && x < ((xj - xi) * (y - yi)) / (yj - yi) + xi;\r\n      if (intersect) inside = !inside;\r\n    }\r\n\r\n    return inside;\r\n  },\r\n  //纹理映射 自定义每个面\r\n  mapUv(textureWidth, textureHeight, geometry, faceIdx, x1, y1, x2, y2, flag) {\r\n    var tileUvW = 1 / textureWidth;\r\n    var tileUvH = 1 / textureHeight;\r\n    if (geometry.faces[faceIdx] instanceof THREE.Face3) {\r\n      var UVs = geometry.faceVertexUvs[0][faceIdx * 2];\r\n      if (faceIdx == 4 && !flag) {\r\n        UVs[0].x = x1 * tileUvW;\r\n        UVs[0].y = y1 * tileUvH;\r\n        UVs[2].x = x1 * tileUvW;\r\n        UVs[2].y = y2 * tileUvH;\r\n        UVs[1].x = x2 * tileUvW;\r\n        UVs[1].y = y1 * tileUvH;\r\n      } else {\r\n        UVs[0].x = x1 * tileUvW;\r\n        UVs[0].y = y1 * tileUvH;\r\n        UVs[1].x = x1 * tileUvW;\r\n        UVs[1].y = y2 * tileUvH;\r\n        UVs[2].x = x2 * tileUvW;\r\n        UVs[2].y = y1 * tileUvH;\r\n      }\r\n      var UVs = geometry.faceVertexUvs[0][faceIdx * 2 + 1];\r\n      if (faceIdx == 4 && !flag) {\r\n        UVs[2].x = x1 * tileUvW;\r\n        UVs[2].y = y2 * tileUvH;\r\n        UVs[1].x = x2 * tileUvW;\r\n        UVs[1].y = y2 * tileUvH;\r\n        UVs[0].x = x2 * tileUvW;\r\n        UVs[0].y = y1 * tileUvH;\r\n      } else {\r\n        UVs[0].x = x1 * tileUvW;\r\n        UVs[0].y = y2 * tileUvH;\r\n        UVs[1].x = x2 * tileUvW;\r\n        UVs[1].y = y2 * tileUvH;\r\n        UVs[2].x = x2 * tileUvW;\r\n        UVs[2].y = y1 * tileUvH;\r\n      }\r\n    }\r\n  },\r\n  getRandomHslColor() {\r\n    return (\r\n      \"hsl(\" +\r\n      Math.round(Math.random() * 360) +\r\n      \",\" +\r\n      Math.round(Math.random() * 100) +\r\n      \"%,\" +\r\n      Math.round(Math.random() * 100) +\r\n      \"%)\"\r\n    );\r\n  }\r\n};\r\n","let headRadius = 2.11;\r\nexport default {\r\n  initPosition: {\r\n    x: -15,\r\n    y: 0,\r\n    z: 0\r\n  },\r\n  headRadius,\r\n  bodyWidth: 1.8141 * headRadius,\r\n  jumpResult: {\r\n    HIT_NEXT_BLOCK_CENTER: 1,\r\n    HIT_CURRENT_BLOCK: 2,\r\n    GAME_OVER_NEXT_BLOCK_BACK: 3,\r\n    GAME_OVER_CURRENT_BLOCK_BACK: 4,\r\n    GAME_OVER_NEXT_BLOCK_FRONT: 5,\r\n    GAME_OVER_BOTH: 6,\r\n    HIT_NEXT_BLOCK_NORMAL: 7\r\n  }\r\n};\r\n","export default {\r\n  blockHeight: 8,\r\n  gravity: 700.0, //重力加速度\r\n  colors: [0xf7aa6c, 0xff8c00, 0x8a9ad6, 0x2c9f67, 0x009ff7, 0xffbe00, 0xd8d0d1]\r\n};\r\n","let aspect = window.innerHeight / window.innerWidth;\r\n\r\nlet frustsize = 30;\r\nlet frustheight = aspect * frustsize;\r\n\r\nexport default {\r\n  bacgroundColor: \"#fff\",\r\n  frustsize: 30,\r\n  frustheight\r\n};\r\n","let customAnimation = {};\r\ncustomAnimation.to = (duration, oldObj, newObj, easing, delay) => {\r\n  const tween = new TWEEN.Tween(oldObj)\r\n    .to(newObj, duration * 1000)\r\n    .easing(easing || TWEEN.Easing.Linear.None)\r\n    .onUpdate(obj => {\r\n      for (let prop in newObj) {\r\n        oldObj[prop] = obj[prop];\r\n      }\r\n    });\r\n  if (delay) {\r\n    setTimeout(() => {\r\n      tween.start();\r\n    }, delay * 1000);\r\n  } else {\r\n    tween.start();\r\n  }\r\n};\r\n\r\nexport default customAnimation;\r\n","import config from \"../config/sceneConfig\";\r\nimport customAnimation from \"../utils/animation\";\r\nlet { frustsize, frustheight } = config;\r\n\r\nclass Camera {\r\n  constructor() {\r\n    this.instance = null;\r\n    this.init();\r\n  }\r\n  init() {\r\n    let aspect = window.innerHeight / window.innerWidth;\r\n    this.instance = new THREE.OrthographicCamera(\r\n      -frustsize,\r\n      frustsize,\r\n      frustheight,\r\n      -frustheight,\r\n      -100,\r\n      85\r\n    );\r\n    this.instance.position.set(-10, 10, 10);\r\n    this.target = new THREE.Vector3(0, 0, 0);\r\n    this.instance.lookAt(this.target);\r\n  }\r\n  updatePosition(newTargetPosition) {\r\n    customAnimation.to(0.5, this.instance.position, {\r\n      x: newTargetPosition.x - 10,\r\n      y: newTargetPosition.y + 10,\r\n      z: newTargetPosition.z + 10\r\n    });\r\n    customAnimation.to(0.5, this.target, {\r\n      x: newTargetPosition.x,\r\n      y: newTargetPosition.y,\r\n      z: newTargetPosition.z\r\n    });\r\n  }\r\n  reset() {\r\n    this.instance.position.set(-10, 10, 10);\r\n    this.target = new THREE.Vector3(0, 0, 0);\r\n  }\r\n}\r\n\r\nexport default Camera;\r\n","import blockConf from \"../config/block-conf\";\r\nimport customAnimation from \"../utils/animation\";\r\n\r\nlet { blockHeight, colors } = blockConf;\r\nlet blockWidth = 16;\r\n\r\nclass BaseBlock {\r\n  constructor(type) {\r\n    this.type = type || \"default\";\r\n    this.height = blockHeight;\r\n    this.width = blockWidth;\r\n    this.status = \"stop\";\r\n    this.scale = 1;\r\n    const seed = Math.floor(Math.random() * 6);\r\n    this.color = colors[seed];\r\n  }\r\n  update() {\r\n    if (this.status == \"shrink\") {\r\n      this._shrink();\r\n    }\r\n  }\r\n\r\n  shrink() {\r\n    this.status = \"shrink\";\r\n  }\r\n\r\n  _shrink() {\r\n    const DELTA_SCALE = 0.005;\r\n    const MIN_SCALE = 0.55;\r\n    this.scale -= DELTA_SCALE;\r\n    this.scale = Math.max(MIN_SCALE, this.scale);\r\n    if (this.scale <= MIN_SCALE) {\r\n      return;\r\n    }\r\n    this.instance.scale.y = this.scale;\r\n    const deltaY = (this.height * DELTA_SCALE) / 2;\r\n    this.instance.position.y -= deltaY;\r\n  }\r\n\r\n  rebound() {\r\n    this.status = \"stop\";\r\n    this.scale = 1;\r\n    customAnimation.to(\r\n      0.5,\r\n      this.instance.scale,\r\n      { y: 1 },\r\n      TWEEN.Easing.Elastic.Out\r\n    );\r\n    customAnimation.to(\r\n      0.5,\r\n      this.instance.position,\r\n      { y: 0 },\r\n      TWEEN.Easing.Elastic.Out\r\n    );\r\n  }\r\n  //以矩形来获取四个顶点坐标\r\n  getVertices() {\r\n    const vertices = [];\r\n    const centerPosition = {\r\n      x: this.instance.position.x,\r\n      z: this.instance.position.z\r\n    };\r\n    vertices.push([\r\n      centerPosition.x + this.width / 2,\r\n      centerPosition.z + this.width / 2\r\n    ]);\r\n    vertices.push([\r\n      centerPosition.x + this.width / 2,\r\n      centerPosition.z - this.width / 2\r\n    ]);\r\n    vertices.push([\r\n      centerPosition.x - this.width / 2,\r\n      centerPosition.z - this.width / 2\r\n    ]);\r\n    vertices.push([\r\n      centerPosition.x - this.width / 2,\r\n      centerPosition.z + this.width / 2\r\n    ]);\r\n    return vertices;\r\n  }\r\n}\r\n\r\nexport default BaseBlock;\r\n","import BaseBlock from \"./base\";\r\nimport blockConf from \"../config/block-conf\";\r\nimport utils from \"../utils\";\r\n\r\nclass Cylinder extends BaseBlock {\r\n  constructor(x, y, z, name, size, cb) {\r\n    super(\"Cylinder\");\r\n    this.width = size || this.width;\r\n    // let geometry = new THREE.CylinderGeometry(\r\n    //   this.width / 2,\r\n    //   this.width / 2,\r\n    //   this.height,\r\n    //   120\r\n    // );\r\n    // let material = new THREE.MeshPhongMaterial({ color: 0xffffff });\r\n    // this.instance = new THREE.Mesh(geometry, material);\r\n    if (name === \"color\") {\r\n      //let randomColor = utils.getRandomHslColor();\r\n      const innerMaterial = new THREE.MeshLambertMaterial({\r\n        color: 0xd8d0d1\r\n      });\r\n      const outerMaterial = new THREE.MeshLambertMaterial({\r\n        color: this.color\r\n      });\r\n\r\n      const innerHeight = 3;\r\n      const outerHeight = (blockConf.blockHeight - innerHeight) / 2;\r\n      const outerGeometry = new THREE.CylinderGeometry(\r\n        this.width / 2,\r\n        this.width / 2,\r\n        outerHeight,\r\n        120\r\n      );\r\n      const innerGeometry = new THREE.CylinderGeometry(\r\n        this.width / 2,\r\n        this.width / 2,\r\n        innerHeight,\r\n        120\r\n      );\r\n\r\n      const totalMesh = new THREE.Object3D();\r\n      const topMesh = new THREE.Mesh(outerGeometry, outerMaterial);\r\n      topMesh.position.y = (innerHeight + outerHeight) / 2;\r\n      topMesh.receiveShadow = true;\r\n      topMesh.castShadow = true;\r\n      const middleMesh = new THREE.Mesh(innerGeometry, innerMaterial);\r\n      middleMesh.receiveShadow = true;\r\n      middleMesh.castShadow = true;\r\n      const bottomMesh = new THREE.Mesh(outerGeometry, outerMaterial);\r\n      bottomMesh.position.y = -(innerHeight + outerHeight) / 2;\r\n      bottomMesh.receiveShadow = true;\r\n      bottomMesh.castShadow = true;\r\n      totalMesh.add(topMesh);\r\n      totalMesh.add(middleMesh);\r\n      totalMesh.add(bottomMesh);\r\n      this.instance = totalMesh;\r\n      option.call(this);\r\n    }\r\n\r\n    function option() {\r\n      this.instance.receiveShadow = true;\r\n      this.instance.castShadow = true;\r\n      this.instance.name = \"block\";\r\n      this.instance.position.x = this.x = x;\r\n      this.instance.position.y = this.y = y;\r\n      this.instance.position.z = this.z = z;\r\n\r\n      if (cb) {\r\n        cb();\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default Cylinder;\r\n","import BaseBlock from \"./base\";\r\nimport utils from \"../utils\";\r\nimport blockConf from \"../config/block-conf\";\r\n\r\nlet loader = new THREE.TextureLoader();\r\nclass Cuboid extends BaseBlock {\r\n  constructor(x, y, z, name, size, cb) {\r\n    super(\"Cuboid\");\r\n    this.width = size || this.width;\r\n\r\n    // let geometry = new THREE.BoxGeometry(this.width, this.height, this.width);\r\n    // let material = new THREE.MeshPhongMaterial({ color: 0xffffff });\r\n    // this.instance = new THREE.Mesh(geometry, material);\r\n    // option.call(this);\r\n\r\n    if (name === \"color\") {\r\n      const innerMaterial = new THREE.MeshLambertMaterial({\r\n        color: 0xd8d0d1\r\n      });\r\n      const outerMaterial = new THREE.MeshLambertMaterial({\r\n        color: this.color\r\n      });\r\n\r\n      const innerHeight = 3;\r\n      const outerHeight = (blockConf.blockHeight - innerHeight) / 2;\r\n      const outerGeometry = new THREE.BoxGeometry(\r\n        this.width,\r\n        outerHeight,\r\n        this.width\r\n      );\r\n      const innerGeometry = new THREE.BoxGeometry(\r\n        this.width,\r\n        innerHeight,\r\n        this.width\r\n      );\r\n\r\n      const totalMesh = new THREE.Object3D();\r\n      const topMesh = new THREE.Mesh(outerGeometry, outerMaterial);\r\n      topMesh.position.y = (innerHeight + outerHeight) / 2;\r\n      topMesh.receiveShadow = true;\r\n      topMesh.castShadow = true;\r\n      const middleMesh = new THREE.Mesh(innerGeometry, innerMaterial);\r\n      middleMesh.receiveShadow = true;\r\n      middleMesh.castShadow = true;\r\n      const bottomMesh = new THREE.Mesh(outerGeometry, outerMaterial);\r\n      bottomMesh.position.y = -(innerHeight + outerHeight) / 2;\r\n      bottomMesh.receiveShadow = true;\r\n      bottomMesh.castShadow = true;\r\n      totalMesh.add(topMesh);\r\n      totalMesh.add(middleMesh);\r\n      totalMesh.add(bottomMesh);\r\n      this.instance = totalMesh;\r\n      option.call(this);\r\n    } else if (name === \"well\") {\r\n      const geometry = new THREE.BoxGeometry(\r\n        this.width,\r\n        this.height,\r\n        this.width\r\n      );\r\n      utils.mapUv(280, 428, geometry, 1, 0, 0, 280, 148); // front\r\n      utils.mapUv(280, 428, geometry, 2, 0, 148, 280, 428); // top\r\n      utils.mapUv(280, 428, geometry, 4, 0, 0, 280, 148, true); // right\r\n      loader.load(\"../../../img/well.png\", texture => {\r\n        const material = new THREE.MeshLambertMaterial({\r\n          map: texture\r\n        });\r\n        this.instance = new THREE.Mesh(geometry, material);\r\n        option.call(this);\r\n      });\r\n    }\r\n\r\n    function option() {\r\n      this.instance.receiveShadow = true;\r\n      this.instance.castShadow = true;\r\n      this.instance.name = \"block\";\r\n      this.instance.position.x = this.x = x;\r\n      this.instance.position.y = this.y = y;\r\n      this.instance.position.z = this.z = z;\r\n\r\n      if (cb) {\r\n        cb();\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default Cuboid;\r\n","import customAnimation from \"../utils/animation\";\r\n\r\nclass Light {\r\n  constructor() {\r\n    this.instances = {};\r\n    this.init();\r\n  }\r\n  init() {\r\n    let ambientLight = new THREE.AmbientLight(0xffffff, 0.8); // soft white light\r\n    let shadowLight = new THREE.DirectionalLight(0xffffff, 0.3);\r\n    this.shadowLight = shadowLight;\r\n    shadowLight.position.set(10, 30, 20);\r\n    let basicMaterial = new THREE.MeshBasicMaterial({ color: 0xf5f5f5 });\r\n    this.shadowTarget = new THREE.Mesh(\r\n      new THREE.PlaneGeometry(0.1, 0.1),\r\n      basicMaterial\r\n    );\r\n    this.shadowTarget.visible = false;\r\n    this.shadowTarget.name = \"shadowTarget\";\r\n    shadowLight.target = this.shadowTarget;\r\n\r\n    shadowLight.castShadow = true;\r\n    shadowLight.shadow.camera.near = 0.5;\r\n    shadowLight.shadow.camera.far = 500;\r\n    shadowLight.shadow.camera.left = -100;\r\n    shadowLight.shadow.camera.right = 100;\r\n    shadowLight.shadow.camera.bottom = -100;\r\n    shadowLight.shadow.camera.top = 100;\r\n    shadowLight.shadow.mapSize.width = 1024;\r\n    shadowLight.shadow.mapSize.height = 1024;\r\n\r\n    this.instances.ambientLight = ambientLight;\r\n    this.instances.shadowLight = shadowLight;\r\n    this.instances.shadowTarget = this.shadowTarget;\r\n  }\r\n  updatePosition(targetPosition) {\r\n    customAnimation.to(0.5, this.shadowTarget.position, {\r\n      x: targetPosition.x,\r\n      y: targetPosition.y,\r\n      z: targetPosition.z\r\n    });\r\n    customAnimation.to(0.5, this.shadowLight.position, {\r\n      x: 10 + targetPosition.x,\r\n      y: 30 + targetPosition.y,\r\n      z: 20 + targetPosition.z\r\n    });\r\n  }\r\n  reset() {\r\n    this.shadowLight.position.set(10, 30, 20);\r\n    this.shadowTarget.position.set(0, 0, 0);\r\n  }\r\n}\r\n\r\nexport default Light;\r\n","class Ground {\n  constructor() {}\n\n  init() {\n    const groundGeometry = new THREE.PlaneGeometry(200, 200);\n    const material = new THREE.ShadowMaterial({\n      color: 0x000000,\n      opacity: 0.3\n    });\n\n    this.instance = new THREE.Mesh(groundGeometry, material);\n    this.instance.receiveShadow = true;\n    this.instance.rotation.x = -Math.PI / 2;\n    this.instance.position.y = -4.1;\n  }\n\n  updatePosition(targetPosition) {\n    this.instance.position.x = targetPosition.x;\n    this.instance.position.z = targetPosition.z;\n  }\n\n  reset() {\n    this.instance.position.x = 0;\n    this.instance.position.z = 0;\n  }\n}\n\nexport default new Ground();\n","import config from \"../config/sceneConfig\";\n\nlet { frustsize, frustheight } = config;\nclass Background {\n  constructor() {}\n\n  init() {\n    const geometry = new THREE.PlaneGeometry(frustsize * 2, frustheight * 2);\n    const material = new THREE.MeshBasicMaterial({\n      color: 0xd7dbe6\n    });\n    this.instance = new THREE.Mesh(geometry, material);\n  }\n}\n\nexport default new Background();\n","export default {\n  audioSources: {\n    init: \"../../../audios/init.mp3\",\n    shrink: \"../../../audios/shrink.mp3\",\n    shrink_end: \"../../../audios/shrink_end.mp3\",\n    fall: \"../../../audios/fall.mp3\",\n    fall_from_block: \"../../../audios/fall_from_block.mp3\",\n    combo1: \"../../../audios/combo1.mp3\",\n    combo2: \"../../../audios/combo2.mp3\",\n    combo3: \"../../../audios/combo3.mp3\",\n    combo4: \"../../../audios/combo4.mp3\",\n    combo5: \"../../../audios/combo5.mp3\",\n    combo6: \"../../../audios/combo6.mp3\",\n    combo7: \"../../../audios/combo7.mp3\",\n    combo8: \"../../../audios/combo8.mp3\",\n    success: \"../../../audios/success.mp3\"\n  }\n};\n","import audioSource from \"../config/audio-conf\";\r\n//是否加载音频模块   移动端卡顿\r\nlet canplay = false;\r\nlet audioManage = {};\r\nlet { audioSources } = audioSource;\r\nif (canplay) {\r\n  for (let i in audioSources) {\r\n    let src = audioSources[i];\r\n    let audio = new Audio(src);\r\n    audioManage[i] = audio;\r\n    if (i == \"shrink\") {\r\n      audioManage[\"shrink\"].onended = () => {\r\n        audioManage[\"shrink_end\"].play();\r\n      };\r\n    }\r\n    if (i === \"shrink_end\") {\r\n      audio.loop = true;\r\n    }\r\n  }\r\n}\r\n\r\naudioManage.play = (key, action) => {\r\n  if (canplay) {\r\n    audioManage[key][action]();\r\n  }\r\n};\r\n\r\nexport default audioManage;\r\n","import bottleConf from \"../config/bottle-conf\";\r\nimport blockConf from \"../config/block-conf\";\r\nimport customAnimation from \"../utils/animation\";\r\nimport audioManage from \"../modules/audioManage\";\r\nlet { blockHeight } = blockConf;\r\nlet { initPosition, headRadius } = bottleConf;\r\n\r\n//let basicMaterial = new THREE.MeshBasicMaterial({ color: 0xffff00 });\r\n\r\nclass Bottle {\r\n  constructor() {\r\n    //跳跃轴\r\n    this.axis = null;\r\n    //跳跃结果\r\n    this.hit = null;\r\n    this.status = \"stop\";\r\n    this.scaleY = 1;\r\n    //跳跃方向\r\n    this.direction = 0;\r\n    //每次的飞行时间\r\n    this.flyingTime = 0;\r\n    //跳跃两个方向的速度\r\n    this.velocity = {\r\n      vx: 0,\r\n      vy: 0\r\n    };\r\n    this.isGatherParticle = false;\r\n  }\r\n\r\n  init() {\r\n    this.obj = new THREE.Object3D();\r\n    this.obj.position.set(initPosition.x, initPosition.y + 30, initPosition.z);\r\n    this.obj.name = \"bottle\";\r\n\r\n    this.bottle = new THREE.Object3D();\r\n    this.human = new THREE.Object3D();\r\n    this.body = new THREE.Object3D();\r\n    //加载纹理\r\n    this.loadTexture();\r\n    this.initHead();\r\n    this.initBottom();\r\n    this.initMiddle();\r\n    this.initBodyHeader();\r\n    this.human.add(this.head);\r\n    this.human.add(this.body);\r\n    this.bottle.add(this.human);\r\n    //调整 bottle中心位置\r\n    this.bottle.position.y = 2;\r\n    this.obj.add(this.bottle);\r\n\r\n    this.initParticle();\r\n  }\r\n\r\n  resetParticle() {\r\n    this.cachePoint.forEach(point => {\r\n      let randomPoint = this.initRandomPoint();\r\n      point.x = randomPoint.x;\r\n      point.y = randomPoint.y;\r\n      point.z = randomPoint.z;\r\n    });\r\n  }\r\n\r\n  gatherParticle() {\r\n    let i = -1;\r\n    let that = this;\r\n    let timer = setInterval(() => {\r\n      if (this.isGatherParticle === false) {\r\n        clearInterval(timer);\r\n        timer = null;\r\n      }\r\n      if (i === 14) {\r\n        that.resetParticle();\r\n        i = -1;\r\n      }\r\n      i++;\r\n      that.cachePoint[i].x = that.cachePoint[i].cache.x;\r\n      that.cachePoint[i].y = that.cachePoint[i].cache.y;\r\n      that.cachePoint[i].z = that.cachePoint[i].cache.z;\r\n      //console.log(that.cachePoint[i], that.destination);\r\n      customAnimation.to(Math.random() / 4 + 0.3, that.cachePoint[i], {\r\n        x: 0,\r\n        y: 0,\r\n        z: 0\r\n      });\r\n    }, 100);\r\n  }\r\n\r\n  initRandomPoint() {\r\n    const minDistance = 10;\r\n    const maxDistance = 15;\r\n    let point = new THREE.Vector3();\r\n    const x =\r\n      (minDistance + Math.random() * (maxDistance - minDistance)) *\r\n      (1 - 2 * Math.random());\r\n    const z =\r\n      (minDistance + Math.random() * (maxDistance - minDistance)) *\r\n      (1 - 2 * Math.random());\r\n    const y = 2;\r\n    point.x = 0;\r\n    point.y = 0;\r\n    point.z = 0;\r\n    point.cache = {\r\n      x,\r\n      y,\r\n      z\r\n    };\r\n    return point;\r\n  }\r\n\r\n  //init particle around bottle\r\n  initParticle() {\r\n    this.whitegeometry = new THREE.Geometry();\r\n    this.greengeometry = new THREE.Geometry();\r\n\r\n    this.cachePoint = [];\r\n    for (let i = 0; i < 15; i++) {\r\n      let point = this.initRandomPoint();\r\n      this.cachePoint.push(point);\r\n      if (i % 2 === 0) {\r\n        this.greengeometry.vertices.push(point);\r\n      } else {\r\n        this.whitegeometry.vertices.push(point);\r\n      }\r\n    }\r\n    let material = new THREE.PointsMaterial({\r\n      color: 0xffffff,\r\n      size: 5\r\n    });\r\n    let greenmaterial = new THREE.PointsMaterial({\r\n      color: 0x9aff9a,\r\n      size: 5\r\n    });\r\n    this.whitegeometrypoints = new THREE.Points(this.whitegeometry, material);\r\n    this.greengeometrypoints = new THREE.Points(\r\n      this.greengeometry,\r\n      greenmaterial\r\n    );\r\n    this.whitegeometrypoints.visible = false;\r\n    this.whitegeometrypoints.visible = false;\r\n    this.obj.add(this.whitegeometrypoints);\r\n    this.obj.add(this.greengeometrypoints);\r\n  }\r\n\r\n  setDirection(direction, axis) {\r\n    this.direction = direction;\r\n    this.axis = axis;\r\n  }\r\n\r\n  initHead() {\r\n    this.head = new THREE.Mesh(\r\n      new THREE.OctahedronGeometry(headRadius),\r\n      this.material.bottomMaterial\r\n    );\r\n    this.head.position.y = 8.8;\r\n  }\r\n\r\n  initBottom() {\r\n    const bottom = new THREE.Mesh(\r\n      new THREE.CylinderGeometry(\r\n        0.62857 * headRadius,\r\n        0.907143 * headRadius,\r\n        1.91423 * headRadius,\r\n        20\r\n      ),\r\n      this.material.bottomMaterial\r\n    );\r\n    bottom.castShadow = true;\r\n    this.body.add(bottom);\r\n  }\r\n  initMiddle() {\r\n    const middle = new THREE.Mesh(\r\n      new THREE.CylinderGeometry(\r\n        headRadius / 1.4,\r\n        (headRadius / 1.44) * 0.88,\r\n        headRadius * 1.2,\r\n        20\r\n      ),\r\n      this.material.middleMaterial\r\n    );\r\n    middle.castShadow = true;\r\n    middle.position.y = 3;\r\n    this.body.add(middle);\r\n  }\r\n  initBodyHeader() {\r\n    const topGeometry = new THREE.SphereGeometry(headRadius / 1.4, 20, 20);\r\n    topGeometry.scale(1, 0.54, 1);\r\n    const top = new THREE.Mesh(topGeometry, this.material.specularMaterial);\r\n    top.castShadow = true;\r\n    top.position.y = 2.1 * headRadius;\r\n    this.body.add(top);\r\n  }\r\n  loadTexture() {\r\n    const loader = new THREE.TextureLoader();\r\n    const specularTexture = loader.load(\"/img/head.png\");\r\n    const specularMaterial = new THREE.MeshBasicMaterial({\r\n      map: specularTexture\r\n    });\r\n\r\n    const bottomTexture = loader.load(\"/img/bottom.png\");\r\n    const bottomMaterial = new THREE.MeshBasicMaterial({\r\n      map: bottomTexture\r\n    });\r\n\r\n    const middleTexture = loader.load(\"/img/middle.png\");\r\n    const middleMaterial = new THREE.MeshBasicMaterial({\r\n      map: middleTexture\r\n    });\r\n\r\n    this.material = { specularMaterial, bottomMaterial, middleMaterial };\r\n  }\r\n  shrink() {\r\n    this.whitegeometrypoints.visible = true;\r\n    this.whitegeometrypoints.visible = true;\r\n    this.status = \"shrink\";\r\n    this.gatherParticle();\r\n    this.isGatherParticle = true;\r\n  }\r\n  jump() {\r\n    this.whitegeometrypoints.visible = false;\r\n    this.whitegeometrypoints.visible = false;\r\n    this.isGatherParticle = false;\r\n    this.resetParticle();\r\n    this.status = \"jump\";\r\n    this.translateH = 0;\r\n    this.translateY = 0;\r\n  }\r\n  stop() {\r\n    this.status = \"stop\";\r\n    this.flyingTime = 0;\r\n    this.scaleY = 1;\r\n  }\r\n  //按压变化\r\n  _shrink() {\r\n    const MIN_SCALE = 0.55;\r\n    const HORIZON_DELTA_SCALE = 0.007;\r\n    const DELTA_SCALE = 0.005;\r\n    const HEAD_DELTA = 0.03;\r\n\r\n    this.scaleY -= DELTA_SCALE;\r\n    this.scaleY = Math.max(MIN_SCALE, this.scaleY);\r\n    if (this.scaleY <= MIN_SCALE) {\r\n      return;\r\n    }\r\n    //y轴高度    x,与z轴扩张\r\n    this.body.scale.y = this.scaleY;\r\n    this.body.scale.x += HORIZON_DELTA_SCALE;\r\n    this.body.scale.z += HORIZON_DELTA_SCALE;\r\n    //头部重心下偏\r\n    this.head.position.y -= HEAD_DELTA;\r\n\r\n    const bottleDeltaY = HEAD_DELTA / 2;\r\n    const deltaY = blockConf.blockHeight * DELTA_SCALE;\r\n    this.obj.position.y -= bottleDeltaY + deltaY;\r\n  }\r\n\r\n  _jump(tickTime) {\r\n    const t = tickTime / 1000;\r\n    //计算每个时间间隔内位移的距离\r\n    const translateH = this.velocity.vx * t;\r\n    const translateY =\r\n      this.velocity.vy * t -\r\n      0.5 * blockConf.gravity * t * t -\r\n      blockConf.gravity * this.flyingTime * t;\r\n    this.translateH += translateH;\r\n    this.translateY += translateY;\r\n    this.obj.translateY(translateY);\r\n    this.obj.translateOnAxis(this.axis, translateH);\r\n    this.flyingTime += t;\r\n  }\r\n\r\n  update() {\r\n    if (this.status === \"shrink\") {\r\n      this._shrink();\r\n    } else if (this.status === \"jump\") {\r\n      const tickTime = Date.now() - this.lastFrameTime;\r\n      this._jump(tickTime);\r\n    }\r\n    this.head.rotation.y += 0.03;\r\n    this.lastFrameTime = Date.now();\r\n  }\r\n\r\n  straight() {\r\n    this.status = \"straight\";\r\n    setTimeout(() => {\r\n      customAnimation.to(0.4, this.obj.position, {\r\n        y: -blockConf.blockHeight / 2 + 0.5\r\n      });\r\n    });\r\n  }\r\n\r\n  hypsokinesis() {\r\n    this.status = \"hypsokinesis\";\r\n    setTimeout(() => {\r\n      if (this.direction == 0) {\r\n        customAnimation.to(0.8, this.obj.rotation, {\r\n          z: Math.PI / 2\r\n        });\r\n      } else {\r\n        customAnimation.to(0.8, this.obj.rotation, {\r\n          x: Math.PI / 2\r\n        });\r\n      }\r\n      setTimeout(() => {\r\n        customAnimation.to(0.4, this.obj.position, {\r\n          y: -blockConf.blockHeight / 2 + 1.2\r\n        });\r\n        customAnimation.to(0.2, this.head.position, {\r\n          x: 1.125\r\n        });\r\n        customAnimation.to(\r\n          0.2,\r\n          this.head.position,\r\n          {\r\n            x: 0\r\n          },\r\n          null,\r\n          0.2\r\n        );\r\n      }, 350);\r\n    }, 200);\r\n  }\r\n\r\n  forerake() {\r\n    this.status = \"forerake\";\r\n    setTimeout(() => {\r\n      if (this.direction == 0) {\r\n        // x\r\n        customAnimation.to(1, this.obj.rotation, {\r\n          z: -Math.PI / 2\r\n        });\r\n      } else {\r\n        customAnimation.to(1, this.obj.rotation, {\r\n          x: -Math.PI / 2\r\n        });\r\n      }\r\n      setTimeout(() => {\r\n        customAnimation.to(0.4, this.obj.position, {\r\n          y: -blockConf.blockHeight / 2 + 0.5\r\n        });\r\n      }, 350);\r\n    }, 200);\r\n  }\r\n  reset() {\r\n    this.stop();\r\n    this.obj.rotation.x = 0;\r\n    this.obj.rotation.z = 0;\r\n    this.obj.position.set(initPosition.x, initPosition.y + 30, initPosition.z);\r\n  }\r\n  //初始化降落弹性动画\r\n  initDown() {\r\n    let count = 0;\r\n    const tween = new TWEEN.Tween(this.obj.position)\r\n      .to(\r\n        {\r\n          x: initPosition.x,\r\n          y: initPosition.y + blockHeight / 2,\r\n          z: initPosition.z\r\n        },\r\n        1000\r\n      )\r\n      .easing(TWEEN.Easing.Bounce.Out)\r\n      .onUpdate(obj => {\r\n        this.obj.position.set(obj.x, obj.y, obj.z);\r\n      })\r\n      .start();\r\n    audioManage.play(\"init\", \"play\");\r\n  }\r\n  //跳跃旋转\r\n  rotate() {\r\n    const scale = 1.4;\r\n    this.human.rotation.x = this.human.rotation.z = 0;\r\n    if (this.direction == 0) {\r\n      customAnimation.to(0.14, this.human.rotation, {\r\n        z: this.human.rotation.z - Math.PI\r\n      });\r\n      customAnimation.to(\r\n        0.18,\r\n        this.human.rotation,\r\n        { z: this.human.rotation.z - 2 * Math.PI },\r\n        undefined,\r\n        0.14\r\n      );\r\n      customAnimation.to(0.1, this.head.position, {\r\n        y: this.head.position.y + 0.9 * scale,\r\n        x: this.head.position.x + 0.45 * scale\r\n      });\r\n      customAnimation.to(\r\n        0.1,\r\n        this.head.position,\r\n        {\r\n          y: this.head.position.y - 0.9 * scale,\r\n          x: this.head.position.x - 0.45 * scale\r\n        },\r\n        undefined,\r\n        0.1\r\n      );\r\n      customAnimation.to(\r\n        0.15,\r\n        this.head.position,\r\n        { y: 8.8, x: 0 },\r\n        undefined,\r\n        0.25\r\n      );\r\n      customAnimation.to(0.1, this.body.scale, {\r\n        y: Math.max(scale, 1),\r\n        x: Math.max(Math.min(1 / scale, 1), 0.7),\r\n        z: Math.max(Math.min(1 / scale, 1), 0.7)\r\n      });\r\n      customAnimation.to(\r\n        0.1,\r\n        this.body.scale,\r\n        {\r\n          y: Math.min(0.9 / scale, 0.7),\r\n          x: Math.max(scale, 1.2),\r\n          z: Math.max(scale, 1.2)\r\n        },\r\n        undefined,\r\n        0.1\r\n      );\r\n      customAnimation.to(\r\n        0.3,\r\n        this.body.scale,\r\n        { y: 1, x: 1, z: 1 },\r\n        undefined,\r\n        0.2\r\n      );\r\n    } else if (this.direction == 1) {\r\n      // y\r\n      customAnimation.to(0.14, this.human.rotation, {\r\n        x: this.human.rotation.x - Math.PI\r\n      });\r\n      customAnimation.to(\r\n        0.18,\r\n        this.human.rotation,\r\n        { x: this.human.rotation.x - 2 * Math.PI },\r\n        undefined,\r\n        0.14\r\n      );\r\n      customAnimation.to(0.1, this.head.position, {\r\n        y: this.head.position.y + 0.9 * scale,\r\n        z: this.head.position.z - 0.45 * scale\r\n      });\r\n      customAnimation.to(\r\n        0.1,\r\n        this.head.position,\r\n        {\r\n          z: this.head.position.z + 0.45 * scale,\r\n          y: this.head.position.y - 0.9 * scale\r\n        },\r\n        undefined,\r\n        0.1\r\n      );\r\n      customAnimation.to(\r\n        0.15,\r\n        this.head.position,\r\n        { y: 8.8, z: 0 },\r\n        undefined,\r\n        0.25\r\n      );\r\n      customAnimation.to(0.05, this.body.scale, {\r\n        y: Math.max(scale, 1),\r\n        x: Math.max(Math.min(1 / scale, 1), 0.7),\r\n        z: Math.max(Math.min(1 / scale, 1), 0.7)\r\n      });\r\n      customAnimation.to(\r\n        0.05,\r\n        this.body.scale,\r\n        {\r\n          y: Math.min(0.9 / scale, 0.7),\r\n          x: Math.max(scale, 1.2),\r\n          z: Math.max(scale, 1.2)\r\n        },\r\n        undefined,\r\n        0.1\r\n      );\r\n      customAnimation.to(\r\n        0.2,\r\n        this.body.scale,\r\n        { y: 1, x: 1, z: 1 },\r\n        undefined,\r\n        0.2\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nexport default new Bottle();\r\n","function Public() {\r\n  this.handlers = {};\r\n}\r\nPublic.prototype = {\r\n  // 订阅事件\r\n  on: function(eventType, handler) {\r\n    var self = this;\r\n    if (!(eventType in self.handlers)) {\r\n      self.handlers[eventType] = [];\r\n    }\r\n    self.handlers[eventType].push(handler);\r\n    return this;\r\n  },\r\n  // 触发事件(发布事件)\r\n  emit: function(eventType) {\r\n    var self = this;\r\n    var handlerArgs = Array.prototype.slice.call(arguments, 1);\r\n    for (var i = 0; i < self.handlers[eventType].length; i++) {\r\n      self.handlers[eventType][i].apply(self, handlerArgs);\r\n    }\r\n    return self;\r\n  },\r\n  // 删除订阅事件\r\n  off: function(eventType, handler) {\r\n    var currentEvent = this.handlers[eventType];\r\n    var len = 0;\r\n    if (currentEvent) {\r\n      len = currentEvent.length;\r\n      for (var i = len - 1; i >= 0; i--) {\r\n        if (currentEvent[i] === handler) {\r\n          currentEvent.splice(i, 1);\r\n        }\r\n      }\r\n    }\r\n    return this;\r\n  }\r\n};\r\n\r\nexport default new Public();\r\n","<template>\n  <section class=\"jump-wrapper\">\n    <section class=\"score-wrapper\">{{score}}</section>\n    <canvas\n      id=\"app\"\n      ref=\"canvas\"\n    ></canvas>\n    <!-- <audio src=\"../audios/combo1.mp3\" autoplay controls></audio> -->\n  </section>\n</template>\n\n<script>\nimport utils from \"./three/utils\";\nimport bottleConf from \"./three/config/bottle-conf\";\nimport blockConf from \"./three/config/block-conf\";\nimport Scene from \"./three/scene/Scene\";\nimport event from \"./three/utils/event\";\nimport audioManage from \"./three/modules/audioManage\";\n\nlet canvas,\n  scene,\n  stats = null;\nexport default {\n  data() {\n    return {\n      score: 0,\n      keyTouch: 32,\n      isKeyDown: false\n    };\n  },\n  methods: {\n    init() {},\n    animate() {\n      requestAnimationFrame(this.animate);\n      this.render();\n      stats.update();\n    },\n    initstats() {\n      stats = new Stats();\n      // 将stats的界面对应左上角\n      stats.domElement.style.position = \"absolute\";\n      stats.domElement.style.left = \"0px\";\n      stats.domElement.style.top = \"0px\";\n      document.body.appendChild(stats.domElement);\n      scene.stats = stats;\n    },\n    bindTouchEvent() {\n      let _that = this;\n      canvas.addEventListener(\"touchstart\", this.touchstart);\n      canvas.addEventListener(\"touchend\", this.touchend);\n      document.onkeydown = e => {\n        if (e.keyCode === _that.keyTouch && !_that.isKeyDown) {\n          _that.isKeyDown = true;\n          _that.touchstart();\n        }\n      };\n      document.onkeyup = e => {\n        if (e.keyCode === _that.keyTouch) {\n          _that.isKeyDown = false;\n          _that.touchend();\n        }\n      };\n    },\n    checkRight() {\n      let status = scene.bottle.status;\n      if (status === \"jump\") {\n        return true;\n      }\n    },\n    touchstart() {\n      if (this.checkRight()) {\n        return;\n      }\n      audioManage.play(\"success\", \"load\");\n      audioManage.play(\"shrink\", \"play\");\n      this.touchStartTime = Date.now();\n      scene.bottle.shrink();\n      scene.currentBlock.shrink();\n    },\n    touchend() {\n      if (this.checkRight()) {\n        return;\n      }\n      audioManage.play(\"shrink\", \"load\");\n      audioManage.play(\"shrink_end\", \"load\");\n      this.touchEndTime = Date.now();\n      const duration = this.touchEndTime - this.touchStartTime;\n      let bottle = scene.bottle;\n      bottle.velocity.vx = Math.min(duration / 6, 400);\n      bottle.velocity.vx = +bottle.velocity.vx.toFixed(2);\n      bottle.velocity.vy = Math.min(150 + duration / 20, 400);\n      bottle.velocity.vy = +bottle.velocity.vy.toFixed(2);\n      bottle.stop();\n      const initY =\n        (1 - scene.currentBlock.instance.scale.y) * blockConf.blockHeight;\n      scene.bottle.hit = this.getHitStatus(\n        bottle,\n        scene.currentBlock,\n        scene.targetBlock,\n        initY\n      );\n      scene.checkingHit = true;\n      scene.currentBlock.rebound();\n      bottle.rotate();\n      bottle.jump();\n    },\n    //碰撞检测\n    getHitStatus(bottle, currentBlock, nextBlock, initY) {\n      let flyingTime =\n        (parseFloat(bottle.velocity.vy) / parseFloat(blockConf.gravity)) * 2.0;\n      initY = initY || bottle.obj.position.y.toFixed(2);\n      var time = +(\n        (bottle.velocity.vy -\n          Math.sqrt(\n            Math.pow(bottle.velocity.vy, 2) - 2 * initY * blockConf.gravity\n          )) /\n        blockConf.gravity\n      ).toFixed(2);\n      flyingTime -= time;\n      flyingTime = +flyingTime.toFixed(2);\n      const destination = [];\n      const bottlePosition = new THREE.Vector2(\n        bottle.obj.position.x,\n        bottle.obj.position.z\n      );\n      const translate = new THREE.Vector2(\n        scene.axis.x,\n        scene.axis.z\n      ).setLength(bottle.velocity.vx * flyingTime);\n      bottlePosition.add(translate);\n      bottle.destination = [\n        +bottlePosition.x.toFixed(2),\n        +bottlePosition.y.toFixed(2)\n      ];\n      destination.push(\n        +bottlePosition.x.toFixed(2),\n        +bottlePosition.y.toFixed(2)\n      );\n\n      let result1, result2;\n      //下一个block上触发\n      if (nextBlock) {\n        const nextDiff =\n          Math.pow(destination[0] - nextBlock.instance.position.x, 2) +\n          Math.pow(destination[1] - nextBlock.instance.position.z, 2);\n        const nextPolygon = nextBlock.getVertices();\n        if (utils.pointInPolygon(destination, nextPolygon)) {\n          if (Math.abs(nextDiff) < 5) {\n            result1 = bottleConf.jumpResult.HIT_NEXT_BLOCK_CENTER;\n          } else {\n            result1 = bottleConf.jumpResult.HIT_NEXT_BLOCK_NORMAL;\n          }\n        } else if (\n          utils.pointInPolygon(\n            [destination[0] - bottleConf.bodyWidth / 2, destination[1]],\n            nextPolygon\n          ) ||\n          utils.pointInPolygon(\n            [destination[0], destination[1] + bottleConf.bodyWidth / 2],\n            nextPolygon\n          )\n        ) {\n          result1 = bottleConf.jumpResult.GAME_OVER_NEXT_BLOCK_BACK;\n        } else if (\n          utils.pointInPolygon(\n            [destination[0] + bottleConf.bodyWidth / 2, destination[1]],\n            nextPolygon\n          ) ||\n          utils.pointInPolygon(\n            [destination[0], destination[1] - bottleConf.bodyWidth / 2],\n            nextPolygon\n          )\n        ) {\n          result1 = bottleConf.jumpResult.GAME_OVER_NEXT_BLOCK_FRONT;\n        }\n      }\n      //未跳出当前block\n      if (currentBlock) {\n        const currentPolygon = currentBlock.getVertices();\n        if (utils.pointInPolygon(destination, currentPolygon)) {\n          result2 = bottleConf.jumpResult.HIT_CURRENT_BLOCK;\n        } else if (\n          utils.pointInPolygon(\n            [destination[0] - bottleConf.bodyWidth / 2, destination[1]],\n            currentPolygon\n          ) ||\n          utils.pointInPolygon(\n            [destination[0], destination[1] + bottleConf.bodyWidth / 2],\n            currentPolygon\n          )\n        ) {\n          if (result1) {\n            result2 = bottleConf.jumpResult.GAME_OVER_BOTH;\n          }\n          result2 = bottleConf.jumpResult.GAME_OVER_CURRENT_BLOCK_BACK;\n        }\n      }\n      return result1 || result2 || 0;\n    },\n\n    removeTouchEvent() {\n      canvas.removeEventListener(\"touchstart\", this.touchstart);\n      canvas.removeEventListener(\"touchend\", this.touchend);\n    },\n    initScoreEvent() {\n      event.on(\"scorechange\", score => {\n        this.score = score === 0 ? 0 : this.score + score;\n      });\n    }\n  },\n  mounted() {\n    canvas = this.$refs[\"canvas\"];\n    scene = new Scene(canvas);\n    this.bindTouchEvent();\n    this.initstats();\n    this.initScoreEvent();\n  },\n  destroyed() {\n    this.removeTouchEvent();\n  }\n};\n</script>\n\n<style >\n@font-face {\n  font-family: myFirstFont;\n  src: url(\"./assets/font/Sacramento-Regular.ttf\");\n}\n.jump-wrapper {\n  height: 100%;\n  width: 100%;\n  position: relative;\n}\n#app {\n  height: 100%;\n  width: 100%;\n}\n.score-wrapper {\n  position: absolute;\n  top: 15px;\n  right: 25px;\n  font-size: 30px;\n  font-family: myFirstFont;\n}\n</style>\n","class TailSystem {\n  constructor() {\n    this.cellTailConfig = {\n      duration: 200,\n      height: 2,\n      width: 0.5,\n      distance: 0.5\n    };\n    this.distance = this.cellTailConfig.distance;\n    this.tailsRemainPool = [];\n    this.tailsUsingPool = [];\n  }\n\n  init(scene, bottle) {\n    this.scene = scene;\n    this.bottle = bottle;\n    this.lastDotPosition = this.bottle.obj.position.clone();\n    this.nowPosition = this.bottle.obj.position.clone();\n    var width = this.cellTailConfig.width;\n    var height = this.cellTailConfig.height;\n    this.geometry = new THREE.PlaneGeometry(width, height);\n    this.material = new THREE.MeshBasicMaterial({\n      color: 0xffffff,\n      side: THREE.DoubleSide,\n      transparent: true,\n      opacity: 0.3\n    });\n\n    // 创造50个尾巴单元,平面和圆柱，先选择平面\n    for (var i = 0; i < 20; i++) {\n      var cellTail = new CellTail(this.geometry, this.material);\n\n      this.scene.add(cellTail.mesh);\n      this.tailsRemainPool.push(cellTail);\n    }\n  }\n\n  update(tickTime) {\n    this.updateActiveCell(tickTime);\n    if (this.bottle.status == \"shrink\") {\n      this.nowPosition = this.bottle.obj.position.clone();\n      this.lastDotPosition = this.bottle.obj.position.clone();\n    }\n\n    if (this.bottle.status == \"jump\") {\n      var distance = void 0;\n\n      // 更新位置\n      this.nowPosition = this.bottle.obj.position.clone();\n\n      distance = this.nowPosition\n        .clone()\n        .distanceTo(this.lastDotPosition.clone());\n      if (distance < 5) {\n        if (distance >= this.distance) {\n          // 距离过大问题\n          var m = distance / this.distance;\n          var n = Math.floor(m);\n          var lastPosition = this.lastDotPosition.clone();\n          var nowPosition = this.nowPosition.clone();\n          var tickScale = tickTime / this.cellTailConfig.duration;\n          for (var i = 1; i <= n; i++) {\n            nowPosition = this.lastDotPosition\n              .clone()\n              .lerp(this.nowPosition.clone(), i / m);\n            var scale = 1 + tickScale * (i / m - 1);\n            scale = scale <= 0 ? 0 : scale;\n            this.layEgg(lastPosition.clone(), nowPosition.clone(), scale);\n            lastPosition = nowPosition.clone();\n            if (i == n) {\n              this.lastDotPosition = nowPosition.clone();\n            }\n          }\n        }\n      } else {\n        this.lastDotPosition = this.nowPosition.clone();\n      }\n    }\n  }\n\n  correctPosition() {\n    this.lastDotPosition = this.bottle.obj.position.clone();\n  }\n\n  updateActiveCell(tickTime) {\n    var array = this.tailsUsingPool;\n    var deltaScaleY = 1 / this.cellTailConfig.duration;\n    var delatAlpha = 1 / this.cellTailConfig.duration;\n    for (var i = 0; i < array.length; i++) {\n      // 更新时间\n      array[i].tickTime += tickTime;\n\n      // 压缩所有cell的高度\n      var newScale = array[i].mesh.scale.y - deltaScaleY * tickTime;\n      if (newScale > 0) {\n        array[i].mesh.scale.y = newScale > 0 ? newScale : 0;\n\n        // array[i].mesh.material.opacity = 0.3\n\n        // 判断透明度和高度，剔除用完的\n        if (array[i].tickTime >= this.cellTailConfig.duration) {\n          resetCeil.call(this);\n        }\n      } else {\n        resetCeil.call(this);\n      }\n    }\n\n    function resetCeil() {\n      array[i].reset();\n      var _cell = array.shift();\n      this.tailsRemainPool.push(_cell);\n      i--;\n    }\n  }\n\n  layEgg(lastDotPosition, nowPosition) {\n    var scale =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\n    var cellTail = this.getMesh();\n\n    this.tailsUsingPool.push(cellTail);\n\n    cellTail.mesh.position.set(nowPosition.x, nowPosition.y, nowPosition.z);\n\n    cellTail.mesh.scale.y = scale;\n\n    cellTail.mesh.lookAt(lastDotPosition);\n\n    cellTail.mesh.rotateY(Math.PI / 2);\n\n    cellTail.mesh.visible = true;\n  }\n\n  getMesh() {\n    var res = this.tailsRemainPool.shift();\n    if (!res) {\n      res = new CellTail(this.geometry, this.material);\n      this.scene.add(res.mesh);\n    }\n    return res;\n  }\n}\n\nclass CellTail {\n  constructor(geometry, material) {\n    this.tickTime = 0;\n    this.mesh = new THREE.Mesh(geometry, material);\n    this.mesh.visible = false;\n    this.mesh.name = \"tail\";\n  }\n\n  reset() {\n    this.tickTime = 0;\n    this.mesh.scale.set(1, 1, 1);\n    this.mesh.visible = false;\n  }\n}\n\nexport default new TailSystem();\n","import Camera from \"./Camera\";\r\nimport Cylinder from \"../block/Cylinder\";\r\nimport Cuboid from \"../block/Cuboid\";\r\nimport Light from \"./Light\";\r\nimport ground from \"../objects/ground\";\r\nimport background from \"../objects/background\";\r\n\r\nimport bottle from \"../objects/bottle\";\r\nimport blockConf from \"../config/block-conf.js\";\r\nimport bottleConf from \"../config/bottle-conf\";\r\nimport event from \"../utils/event.js\";\r\nimport audioManage from \"../modules/audioManage\";\r\nimport tailSystem from \"../objects/tail\";\r\n\r\nclass Scene {\r\n  constructor(canvas) {\r\n    this.instance = null;\r\n    this.currentBlock = null;\r\n    this.targetBlock = null;\r\n    this.checkingHit = false;\r\n    this.axis = null;\r\n    this.combo = 0;\r\n    this.init(canvas);\r\n    this.now = Date.now();\r\n    this.lastFrameTime = Date.now();\r\n  }\r\n  init(canvas) {\r\n    this.instance = new THREE.Scene();\r\n    // 初始化渲染器\r\n    this.renderer = new THREE.WebGLRenderer({\r\n      antialias: true,\r\n      canvas: canvas,\r\n      preserveDrawingBuffer: true\r\n    });\r\n    //开启阴影\r\n    this.renderer.shadowMap.enabled = true;\r\n    this.renderer.shadowMap.type = THREE.PCFShadowMap;\r\n\r\n    this.camera = new Camera();\r\n    // this.axesHelper = new THREE.AxesHelper(100);\r\n    // this.instance.add(this.axesHelper);\r\n    this.instance.add(this.camera.instance);\r\n\r\n    this.renderer.setPixelRatio(window.devicePixelRatio);\r\n    this.renderer.setSize(canvas.offsetWidth, canvas.offsetHeight);\r\n    this.initLight();\r\n    this.addGround();\r\n    this.initBacground();\r\n    this.initBottle();\r\n    this.addInitBlock();\r\n    this.tailSystem = tailSystem;\r\n    this.tailSystem.init(this.instance, this.bottle);\r\n    //this.addControl();\r\n    this.render();\r\n  }\r\n  initBottle() {\r\n    this.bottle = bottle;\r\n    this.bottle.init();\r\n    this.instance.add(this.bottle.obj);\r\n    this.bottle.initDown();\r\n  }\r\n  addGround() {\r\n    this.ground = ground;\r\n    ground.init();\r\n    this.instance.add(ground.instance);\r\n  }\r\n  //初始化背景\r\n  initBacground() {\r\n    this.background = background;\r\n    background.init();\r\n    background.instance.position.z = -84;\r\n    this.camera.instance.add(background.instance);\r\n  }\r\n  //光线\r\n  initLight() {\r\n    this.light = new Light();\r\n    for (let i in this.light.instances) {\r\n      this.instance.add(this.light.instances[i]);\r\n    }\r\n  }\r\n  //添加block\r\n  addInitBlock() {\r\n    let cuboid = new Cuboid(-15, 0, 0, \"well\", 16, () => {\r\n      this.instance.add(cuboid.instance);\r\n    });\r\n    let cylinder = new Cylinder(23, 0, 0, \"color\");\r\n    this.currentBlock = cuboid;\r\n    this.targetBlock = cylinder;\r\n    this.instance.add(cylinder.instance);\r\n    this.setDirection(0);\r\n  }\r\n  setDirection(direction) {\r\n    const currentPosision = {\r\n      x: this.bottle.obj.position.x,\r\n      z: this.bottle.obj.position.z\r\n    };\r\n\r\n    this.axis = new THREE.Vector3(\r\n      this.targetBlock.x - currentPosision.x,\r\n      0,\r\n      this.targetBlock.z - currentPosision.z\r\n    );\r\n    this.axis.normalize();\r\n    this.bottle.setDirection(direction, this.axis);\r\n  }\r\n  addControl() {\r\n    new THREE.OrbitControls(this.camera.instance, this.renderer.domElement);\r\n  }\r\n  //\r\n  updateNextBlock() {\r\n    const seed = Math.round(Math.random());\r\n    const type = seed ? \"cuboid\" : \"cylinder\";\r\n    const direction = Math.round(Math.random()); // 0 -> x 1 -> y\r\n    const width = Math.round(Math.random() * 12) + 8;\r\n    const distance = Math.round(Math.random() * 20) + 20;\r\n    this.currentBlock = this.targetBlock;\r\n    const targetPosition = (this.targetPosition = {});\r\n    targetPosition.y = this.targetBlock.instance.position.y;\r\n    if (direction == 0) {\r\n      // x\r\n      targetPosition.x = this.currentBlock.instance.position.x + distance;\r\n      targetPosition.z = this.currentBlock.instance.position.z;\r\n    } else if (direction == 1) {\r\n      // z\r\n      targetPosition.x = this.currentBlock.instance.position.x;\r\n      targetPosition.z = this.currentBlock.instance.position.z - distance;\r\n    }\r\n\r\n    if (type == \"cuboid\") {\r\n      this.targetBlock = new Cuboid(\r\n        targetPosition.x,\r\n        targetPosition.y,\r\n        targetPosition.z,\r\n        \"color\",\r\n        width\r\n      );\r\n    } else {\r\n      this.targetBlock = new Cylinder(\r\n        targetPosition.x,\r\n        targetPosition.y,\r\n        targetPosition.z,\r\n        \"color\",\r\n        width\r\n      );\r\n    }\r\n    this.instance.add(this.targetBlock.instance);\r\n    this.setDirection(direction);\r\n    const cameraTargetPosition = {\r\n      x:\r\n        (this.currentBlock.instance.position.x +\r\n          this.targetBlock.instance.position.x) /\r\n        2,\r\n      y:\r\n        (this.currentBlock.instance.position.y +\r\n          this.targetBlock.instance.position.y) /\r\n        2,\r\n      z:\r\n        (this.currentBlock.instance.position.z +\r\n          this.targetBlock.instance.position.z) /\r\n        2\r\n    };\r\n\r\n    this.updateCameraPosition(cameraTargetPosition);\r\n    this.ground.updatePosition(cameraTargetPosition);\r\n  }\r\n  updateCameraPosition(targetPosition) {\r\n    this.camera.updatePosition(targetPosition);\r\n    this.light.updatePosition(targetPosition);\r\n  }\r\n  updateScoreEvent(score) {\r\n    event.emit(\"scorechange\", score);\r\n  }\r\n  checkBottleHit() {\r\n    let _that = this;\r\n    if (\r\n      this.bottle.obj.position.y <= blockConf.blockHeight / 2 &&\r\n      this.bottle.status === \"jump\" &&\r\n      this.bottle.flyingTime > 0.3\r\n    ) {\r\n      this.checkingHit = false;\r\n      if (\r\n        this.bottle.hit == bottleConf.jumpResult.HIT_NEXT_BLOCK_CENTER ||\r\n        this.bottle.hit == bottleConf.jumpResult.HIT_NEXT_BLOCK_NORMAL ||\r\n        this.bottle.hit == bottleConf.jumpResult.HIT_CURRENT_BLOCK\r\n      ) {\r\n        this.bottle.stop();\r\n        this.bottle.obj.position.y = blockConf.blockHeight / 2;\r\n        this.bottle.obj.position.x = this.bottle.destination[0];\r\n        this.bottle.obj.position.z = this.bottle.destination[1];\r\n        if (this.bottle.hit !== bottleConf.jumpResult.HIT_CURRENT_BLOCK) {\r\n          let score = 1;\r\n          if (this.bottle.hit === bottleConf.jumpResult.HIT_NEXT_BLOCK_CENTER) {\r\n            this.combo++;\r\n            score = 2 * this.combo;\r\n            let combo = this.combo > 8 ? 8 : this.combo;\r\n            audioManage.play(\"combo\" + combo, \"play\");\r\n          } else {\r\n            this.combo = 0;\r\n            audioManage.play(\"success\", \"play\");\r\n          }\r\n          this.updateScoreEvent(score);\r\n          this.updateNextBlock();\r\n        }\r\n      } else {\r\n        this.bottle.stop();\r\n        this.combo = 0;\r\n        //前倾\r\n        if (\r\n          this.bottle.hit === bottleConf.jumpResult.GAME_OVER_NEXT_BLOCK_BACK ||\r\n          this.bottle.hit === bottleConf.jumpResult.GAME_OVER_CURRENT_BLOCK_BACK\r\n        ) {\r\n          this.bottle.forerake();\r\n          tilt();\r\n        }\r\n        //后倾\r\n        else if (\r\n          this.bottle.hit === bottleConf.jumpResult.GAME_OVER_NEXT_BLOCK_FRONT\r\n        ) {\r\n          this.bottle.hypsokinesis();\r\n          tilt();\r\n        } else {\r\n          this.bottle.straight();\r\n          audioManage.play(\"fall\", \"play\");\r\n          this.bottle.obj.position.y = blockConf.blockHeight / 2;\r\n          setTimeout(() => {\r\n            gameover();\r\n          }, 1500);\r\n        }\r\n\r\n        function tilt() {\r\n          audioManage.play(\"fall_from_block\", \"play\");\r\n          _that.bottle.obj.position.y = blockConf.blockHeight / 2;\r\n          setTimeout(() => {\r\n            gameover();\r\n          }, 1500);\r\n        }\r\n\r\n        function gameover() {\r\n          alert(\"游戏结束\");\r\n          _that.restart();\r\n          _that.updateScoreEvent(0);\r\n        }\r\n      }\r\n    }\r\n  }\r\n  restart() {\r\n    this.deleteObjectsfromScene();\r\n    this.camera.reset();\r\n    this.light.reset();\r\n    this.bottle.reset();\r\n    this.ground.reset();\r\n    //this.updateScore('0')\r\n    this.addInitBlock();\r\n    this.addGround();\r\n    this.initBottle();\r\n  }\r\n  deleteObjectsfromScene() {\r\n    let obj = this.instance.getObjectByName(\"block\");\r\n    while (obj) {\r\n      this.instance.remove(obj);\r\n      if (obj.geometry) {\r\n        obj.geometry.dispose();\r\n      }\r\n      if (obj.material) {\r\n        obj.material.dispose();\r\n      }\r\n      obj = this.instance.getObjectByName(\"block\");\r\n    }\r\n    this.instance.remove(this.bottle.obj);\r\n    this.instance.remove(this.ground.instance);\r\n  }\r\n  render(time) {\r\n    this.now = Date.now();\r\n    const tickTime = this.now - this.lastFrameTime;\r\n\r\n    this.bottle.update();\r\n    if (this.currentBlock) {\r\n      this.currentBlock.update();\r\n    }\r\n    if (this.checkingHit) {\r\n      this.checkBottleHit();\r\n    }\r\n    if (this.tailSystem) {\r\n      this.tailSystem.update(tickTime);\r\n    }\r\n    this.renderer.render(this.instance, this.camera.instance);\r\n    TWEEN.update(time);\r\n    if (this.stats) {\r\n      this.stats.update();\r\n    }\r\n    this.lastFrameTime = Date.now();\r\n    if (this.bottle.isGatherParticle) {\r\n      this.bottle.whitegeometry.verticesNeedUpdate = true;\r\n      this.bottle.greengeometry.verticesNeedUpdate = true;\r\n    }\r\n\r\n    requestAnimationFrame(this.render.bind(this));\r\n  }\r\n}\r\n\r\nexport default Scene;\r\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=7a37ac09&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from \"vue\";\nimport App from \"./App.vue\";\n\nimport \"@/assets/style/reset.css\";\n\nimport TWEEN from \"@tweenjs/tween.js\";\n\nimport * as Stats from \"stats.js\";\n\nwindow.TWEEN = TWEEN;\nwindow.Stats = Stats;\nVue.config.productionTip = false;\n\nnew Vue({\n  render: h => h(App)\n}).$mount(\"#app\");\n"],"sourceRoot":""}